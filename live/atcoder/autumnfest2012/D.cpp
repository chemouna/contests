#include <stdio.h>
#include <iostream>
using namespace std;
#define rep(i, n) for (int i = 0; i < (int)(n); i++)
typedef long long Int;

const int dat1[] = {0,1,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,893,1112,1748,1530,1816,185,1678,1545,1917,1622,1619,1561,1039,881,1482,63,973,43,-1};
const int dat2[] = {0,1,471044037,728487605,273024722,4311556,580231009,336342094,735416536,985013995,733078351,56485887,891606433,883491444,92960138,798356359,366590796,715226125,296993300,609248586,764933660,486570232,955801034,699054917,549426113,247171854,432218721,412545089,314009180,255866164,372546038,964867942,795457211,430492834,563035142,396008218,664674740,574745821,10097425,703244521,205006548,506787455,478249822,935331170,492455245,367181716,182582381,802097621,589446215,302321615,714568910,460658316,260155974,714700836,857003260,987529097,262576361,457018130,479793591,964344725,125358142,911359421,156014152,623733594,891024209,424075349,961126936,636515745,773775745,923156061,810177641,787359100,376189776,205903164,842593589,860519327,255070881,621953232,801610872,389013120,949189369,603006063,815447297,294834739,657372730,574658307,326430655,241647729,670515219,379893913,720794258,569208225,401649562,821809613,778454769,825273519,661531915,421117199,138038500,544698534,90375641,794277929,372857686,197194703,897450946,568075349,367307797,673875944,337991205,859730392,678566594,643233345,771181580,897922977,784175409,44496425,552926357,936538069,392035019,39071747,510800382,447915747,844323924,273381555,483160125,689064163,386728639,974872836,669462600,614500712,831156256,893603204,996038106,651805552,877934925,805969672,312589585,417123866,555861559,291233703,153418630,899131347,596356626,999848458,303034641,767314751,681306787,988559992,895650396,700767388,492718660,30551650,41472724,935173123,675010220,938100553,19535491,887147403,712862936,150284662,339544590,914492163,239541680,652215676,649148609,825233535,172247108,762114359,282422232,46991697,507130563,753607530,53794652,493618376,965716854,336122857,709791254,457651179,328219607,546270137,428232473,42503237,241079402,808584169,459959148,455013539,525622910,947584702,942462633,634876820,687084950,352563711,111536249,906910207,216568139,207545213,457645178,793459948,643127371,964761755,14509583,558866357,850189383,717235776,133222827,862514243,249420845,708183393,524407422,15857391,778525889,325163187,323156669,733669497,124187334,858064616,930074032,229044964,222048640,173215710,638030030,983794786,297065854,766402960,886919437,832980526,387654817,603173079,495859025,612849750,752839101,100541180,600090510,701103562,659035503,216792268,716584935,893813687,897029889,185269285,83851447,188900498,612950277,779813649,420262401,453400745,745035597,579765306,524509610,212821128,254249950,395150166,825210680,211590772,350002085,916095986,132530702,309635593,877355652,354269920,279355401,35405396,551199910,621092894,701684898,637033161,788825064,611698678,622753469,601448804,722634027,427911407,399039222,112834022,640321691,855480122,984276245,148675110,956931640,680613483,508850300,972991480,466669963,672381196,426459928,982476267,487708017,279171507,785882395,854106959,484382025,293597555,96377252,552843012,956749129,281262474,576589222,977192078,695821903,802041481,948271120,434093534,565588775,461229237,618012199,701362725,880383398,506664933,693141818,651554600,862049899,446733296,430539113,165743530,816205116,65946990,884994852,240889380,376320751,121360225,943765097,782892542,230854957,122294215,641666767,536272532,553820924,215876155,379041527,660854512,897316852,191688227,468246645,865340409,562055105,579788672,631621822,324456129,144096267,852716278,27206396,891177137,86088067,905347589,54806317,459947730,674080659,103099298,111454271,819927430,792370669,59587930,961463719,404178883,686533424,426979792,474373568,145740190,549083608,537625386,778112451,149742716,292062411,147236115,82742054,182166122,689484411,496536763,75604496,715555229,195127094,316825574,379526781,560228624,7870648,545572504,241911808,272535621,309822330,166055634,756885047,309398267,22636134,241640058,302713626,298601904,22583839,108406814,698737055,273269680,693105298,316086229,445689933,193219809,20991629,204788003,72348114,129099024,933357110,971942745,70760738,677419501,352959436,105313244,57355207,143474189,344493761,559298134,18257109,668238818,115381345,55450288,548430669,873362352,600732913,561645874,424550866,781489017,968761024,43404098,983685271,438828038,939780269,762723984,46872294,529439830,996428222,520573270,879372171,889901832,717293806,891131309,296145824,45348768,630774597,404656785,330282194,899679293,552339757,771760909,184548203,777997618,836019692,812643264,468581984,225866916,638443741,651253905,371464501,513471154,326625419,704350051,597836708,785922056,771590867,376668028,913796906,349117885,479394603,976466106,875914123,296389683,719286859,965480806,578602783,486227053,957226315,453798001,358088632,974982042,795964677,761396399,55988012,923751293,219053373,561568483,385283281,651304569,753066244,729732601,982390458,338465907,998295697,101336933,195327011,843849563,205542324,767669792,67522709,608415987,442874275,779085290,701711556,441077245,823881876,929095795,528351171,760798734,552712567,236512743,507993864,770125429,498890321,149100471,316592194,905107912,221025535,260735156,270343777,383249843,394839731,74699390,112088445,140284211,329147717,99532354,845446998,675932949,240525269,8843872,587649587,689215985,285240960,495822029,986576079,434521425,108619012,48447964,824121179,284411429,323925095,858401335,835345312,243927189,361976817,287029823,997547467,526069137,669218107,185150997,664053004,175635034,331969729,314804034,593696954,909227888,656486827,303903225,445635449,158827769,530477433,139425272,3625896,752689314,931477210,71232989,118654550,495580589,746169902,380440572,19820395,180617254,430561502,780902463,528695115,246698618,476869043,160182719,633414674,916690844,259695372,294493259,836507980,328851821,194008746,727318110,825750934,644877646,346356481,6240346,500305865,622215597,31089786,901159497,10567243,76341016,77073814,409443400,334935873,631109454,207926651,224265250,604576933,362069594,8258113,386771368,173398240,213909392,778797553,129999691,267534008,31893191,202230866,467249941,254134190,554062956,955205256,635386719,214786327,417669440,657104961,26021433,8635641,257167087,598178639,693104336,293477646,343982969,244985771,524929270,858419567,644647898,491674297,640029139,741292955,769232064,542769424,45854525,76876221,519025062,322045730,254438801,534280789,859010502,312844592,721294848,114929254,465304691,777047921,422432420,517514949,866302961,514495798,419156811,9443661,111450849,704086100,989456342,169509799,692309249,390928501,401648161,824512752,58607560,105803597,163336578,381505794,421167817,956444614,132884967,350313047,852937836,390509219,551706524,386339346,334336852,85203859,475479769,286958614,946168260,285768233,864585976,199888398,38205856,220386308,538832244,75836970,605054029,511507954,956883512,487618651,515563152,678196861,513972739,768067181,296124960,120060909,246957852,648310521,202340352,83195851,552684540,388337239,253820835,290215848,701551153,52380451,574593501,119628995,154636795,953989415,717679983,186825291,992342482,491772253,365682960,72057029,95439640,35755843,593714271,240425342,116955804,128339863,876902551,691731922,478892540,391495182,189684527,102861465,124089003,317466925,21735289,83145534,891307884,265055946,412767319,941276596,570701317,918574015,375425822,357429566,656242133,41300027,268855084,328046684,75995684,835817239,55004267,425879717,899761540,301281092,919739281,402161794,297595824,729671190,711564458,494455600,449830093,22583984,379321041,612769799,131962689,862812908,98096274,956202518,211022308,327873216,535635595,217352887,312292331,803949450,400445536,176839970,795222828,443463861,977327959,490134325,371212991,854603791,63456551,365274179,292770587,745050546,183895177,802369107,219740887,148035219,621722318,884006824,672052599,34102463,46729090,447373580,124004486,940260767,952815489,271573390,135652390,903964193,944929623,539418236,522616108,961302287,289657835,849577402,739463985,342954178,851562305,412113493,533593636,413641097,633484105,726104443,86461464,435615125,47574488,739042601,449115456,392373781,757918698,172157196,287281935,491102416,651219912,845414007,908538836,830787773,34331628,853937267,936323129,658195516,914407321,302500634,719101973,353372684,603455218,405037529,87341601,579158351,866878558,541177756,150021134,525475986,309125259,945871114,924079951,447960680,525587195,50708517,419168982,258696416,852984322,50003898,127503152,741514544,145396458,870692521,229381762,958624056,510776377,995183005,697223484,744199081,33855946,292255094,821774837,924650633,337382675,165498532,267263274,-1};
int solve(Int n, int M) {
    const int *a = M == 1999 ? dat1 : dat2;
    int k = 0;
    while (a[2*(k+1)] != -1 && (k+1)*5000000LL+1 <= n) k++;
    n -= k*5000000LL+1;
    int p = a[2*k], q = a[2*k+1];
    while (n--) {
        const int r = ((Int)p*p + (Int)q*q) % M;
        p = q;
        q = r;
    }
    return p;
}

int main() {
    Int n, M;
    cin >> n >> M;
    const int ans = solve(n, M);
    printf("%d\n", ans);
    return 0;
}
